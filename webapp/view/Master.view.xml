<mvc:View xmlns="sap.m" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc" xmlns:layout="sap.ui.layout" xmlns:smartTable="sap.ui.comp.smarttable" 
    xmlns:fb="sap.ui.comp.filterbar" xmlns:core="sap.ui.core" xmlns:microChart="sap.suite.ui.microchart" 
    controllerName="com.sap.sobeys.controller.Master">
	<f:DynamicPage id="dynamicPageId" headerExpanded="true" toggleHeaderOnTitleClick="true">
		<!-- DynamicPage Title -->
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<HBox>
						<f:Avatar src="sap-icon://product" displaySize="XS" displayShape="Circle" backgroundColor="Random" class="sapUiTinyMarginEnd"/>
						<Title text="SOBEYS FnR Purchase Orders"/>
					</HBox>
				</f:heading>
			</f:DynamicPageTitle>
		</f:title>
		<!-- DynamicPage Header -->
		<f:header>
			<f:DynamicPageHeader pinnable="true">
				<fb:FilterBar id="filterbar" reset="onReset" search="onSearch" useToolbar="false" showGoOnFB="true">
					<fb:filterGroupItems>
						<fb:FilterGroupItem name="A" groupName="A" label="Department" visibleInFilterBar="true">
							<fb:control>
								<ComboBox id="slDepartment" showSecondaryValues="true" items="{ path: 'departmentModel>/' }">
									<core:ListItem key="{departmentModel>id}" text="{departmentModel>name}" additionalText="{departmentModel>id}"/>
								</ComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem1" groupName="basicFilter" label="Receiving Location" visibleInFilterBar="true">
							<fb:control>
								<MultiComboBox selectedKeys="000001,000002,000005" selectionChange=".onFilterChange" showSecondaryValues="true" required="true">
									<core:ListItem key="000001" text="Warehouse A" additionalText="1"/>
									<core:ListItem key="000002" text="Warehouse B" additionalText="2"/>
									<core:ListItem key="000003" text="Warehouse C" additionalText="3"/>
									<core:ListItem key="000004" text="Warehouse D" additionalText="4"/>
									<core:ListItem key="000005" text="Warehouse E" additionalText="5"/>
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem2" groupName="basicFilter" label="Supplying Location" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="000001,000003,000005" selectionChange=".onFilterChange" showSecondaryValues="true">
								    <core:ListItem key="000001" text="Toronto" additionalText="1"/>
									<core:ListItem key="000002" text="Montreal" additionalText="2"/>
									<core:ListItem key="000003" text="Ottawa" additionalText="3"/>
									<core:ListItem key="000004" text="Stellarton" additionalText="4"/>
									<core:ListItem key="000005" text="Dartmouth" additionalText="5"/>
									</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="dateFilterItem1" groupName="basicFilter" label="Order Date" visibleInFilterBar="true">
							<fb:control>
								<DatePicker value="{path: 'dateModel>/OrderDate', type: 'sap.ui.model.type.Date', formatOptions: { UTC: true } }"/>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="dateFilterItem2" groupName="basicFilter" label="Delivery Date" visibleInFilterBar="true">
							<fb:control>
								<DatePicker value="{path: 'dateModel>/DeliveryDate', type: 'sap.ui.model.type.Date', formatOptions: { UTC: true } }"/>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem3" groupName="basicFilter" label="Status" visibleInFilterBar="true">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="Ready" />
									<core:ListItem key="102" text="Review" />
									<core:ListItem key="103" text="Urgent Review" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem4" groupName="basicFilter" label="Exceptions" visibleInFilterBar="true">
							<fb:control>
								<MultiComboBox selectedKeys="101,102" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="Neutral" additionalText="101"/>
									<core:ListItem key="102" text="Warning" additionalText="102"/>
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
                        <fb:FilterGroupItem name="filterItem5" groupName="basicFilter" label="Temp Zone" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectionChange=".onFilterChange" showSecondaryValues="false">
									<core:ListItem key="101" text="Normal" />
									<core:ListItem key="102" text="Refrigerated" />
									<core:ListItem key="103" text="Frozen" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem6" groupName="basicFilter" label="Supplier Number" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="000001" />
									<core:ListItem key="102" text="000002" />
									<core:ListItem key="103" text="000003" />
									<core:ListItem key="103" text="000004" />
									<core:ListItem key="103" text="000005" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem7" groupName="basicFilter" label="Supplier Name" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="Supplier A" />
									<core:ListItem key="102" text="Supplier B" />
									<core:ListItem key="103" text="Supplier C" />
									<core:ListItem key="103" text="Supplier D" />
									<core:ListItem key="103" text="Supplier E" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem8" groupName="basicFilter" label="VSR #" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="Supplier A" />
									<core:ListItem key="102" text="Supplier B" />
									<core:ListItem key="103" text="Supplier C" />
									<core:ListItem key="103" text="Supplier D" />
									<core:ListItem key="103" text="Supplier E" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem9" groupName="basicFilter" label="Buyer #" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="Supplier A" />
									<core:ListItem key="102" text="Supplier B" />
									<core:ListItem key="103" text="Supplier C" />
									<core:ListItem key="103" text="Supplier D" />
									<core:ListItem key="103" text="Supplier E" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem name="filterItem10" groupName="basicFilter" label="Article #" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="false">
									<core:ListItem key="101" text="Supplier A" />
									<core:ListItem key="102" text="Supplier B" />
									<core:ListItem key="103" text="Supplier C" />
									<core:ListItem key="103" text="Supplier D" />
									<core:ListItem key="103" text="Supplier E" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>
                        <fb:FilterGroupItem name="dateFilterItem3" groupName="basicFilter" label="Ship Date" visibleInFilterBar="false">
							<fb:control>
								<DatePicker value="{path: 'dateModel>/ShipDate', type: 'sap.ui.model.type.Date', formatOptions: { UTC: true } }"/>
							</fb:control>
						</fb:FilterGroupItem>
                       <fb:FilterGroupItem name="dateFilterItem4" groupName="basicFilter" label="Forcasting Period" visibleInFilterBar="false">
							<fb:control>
								<DateRangeSelection displayFormat="dd/MM/yyyy"/>
							</fb:control>
						</fb:FilterGroupItem>

						<fb:FilterGroupItem name="filterItem11" groupName="basicFilter" label="Transportation Partner" visibleInFilterBar="false">
							<fb:control>
								<MultiComboBox selectedKeys="101" selectionChange=".onFilterChange" showSecondaryValues="true">
									<core:ListItem key="101" text="FedEx" />
									<core:ListItem key="102" text="UPS" />
									<core:ListItem key="103" text="DHL" />
									<core:ListItem key="103" text="Canpar Express" />
									<core:ListItem key="103" text="Purolator" />
								</MultiComboBox>
							</fb:control>
						</fb:FilterGroupItem>

					</fb:filterGroupItems>
				</fb:FilterBar>
			</f:DynamicPageHeader>
		</f:header>
		<!-- DynamicPage Content -->
		<f:content>
			<VBox fitContainer="true">
            	<smartTable:SmartTable id="poTable" entitySet="/"
		smartFilterId="smartFilterBar" tableType="ResponsiveTable"
		useExportToExcel="true"  useVariantManagement="false"
		useTablePersonalisation="true" 
        header="Proposed Orders" showRowCount="true"
		persistencyKey="SmartTableAnalytical_Explored" enableAutoBinding="true"
        editTogglable="true"
		demandPopin="true" class="sapUiResponsiveContentPadding" >

				<Table >
				<columns>
						<Column>
                            <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "Supplier",  "leadingProperty": "Supplier", "sortProperty": "Supplier", "additionalProperty": "Supplier", "description": "Supplier"}' />
					        </customData>
							<Text text="Supplier"/>
						</Column>
						<Column sortIndicator="None">
                            <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "SupplyLocation",  "leadingProperty": "SupplyLocation", "sortProperty": "SupplyLocation", "additionalProperty": "SupplyLocation", "description": "SupplyLocation"}' />
					        </customData>
							<Text text="Supplying Location"/>
						</Column>
						<Column minScreenWidth="Desktop">
                          <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "ReceivingLocation",  "leadingProperty": "ReceivingLocation", "sortProperty": "ReceivingLocation", "additionalProperty": "ReceivingLocation", "description": "ReceivingLocation"}' />
					        </customData>
							<Text text="Receiving Location"/>
						</Column>
						<Column minScreenWidth="Desktop">
                          <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "VSRNumber",  "leadingProperty": "VSRNumber", "sortProperty": "VSRNumber", "additionalProperty": "VSRNumber", "description": "VSRNumber"}' />
					        </customData>
							<Text text="VSR #"/>
						</Column>
						<Column minScreenWidth="Desktop">
                          <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "BuyerNumber",  "leadingProperty": "BuyerNumber", "sortProperty": "BuyerNumber", "additionalProperty": "BuyerNumber", "description": "BuyerNumber"}' />
					        </customData>
							<Text text="Buyer #"/>
						</Column>
                        <Column minScreenWidth="Desktop">
                          <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "ArticleNumber",  "leadingProperty": "ArticleNumber", "sortProperty": "ArticleNumber", "additionalProperty": "ArticleNumber", "description": "ArticleNumber"}' />
					        </customData>
                            <Text text="Article #"></Text>
                        </Column>
						<Column minScreenWidth="Desktop" hAlign="Center">
                          <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "OrdQty",  "leadingProperty": "OrdQty", "sortProperty": "OrdQty", "additionalProperty": "OrdQty", "description": "OrdQty"}' />
					        </customData>
							<Text text="Proposed Order Quantity"/>
						</Column>
						<Column minScreenWidth="Desktop">
                         <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "OrderDate",  "leadingProperty": "OrderDate", "sortProperty": "OrderDate", "additionalProperty": "OrderDate", "description": "OrderDate"}' />
					        </customData>
							<Text text="Order Date"/>
						</Column>
						<Column minScreenWidth="Desktop">
                         <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "DeliveryDate",  "leadingProperty": "DeliveryDate", "sortProperty": "DeliveryDate", "additionalProperty": "DeliveryDate", "description": "DeliveryDate"}' />
					        </customData>
							<Text text="Delivery Date"/>
						</Column>
						<Column minScreenWidth="Desktop">
                         <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "ShipDate",  "leadingProperty": "ShipDate", "sortProperty": "ShipDate", "additionalProperty": "ShipDate", "description": "ShipDate"}' />
					        </customData>
							<Text text="Ship Date"/>
						</Column>
                        <Column minScreenWidth="Desktop">
                         <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "TransportationPartner",  "leadingProperty": "TransportationPartner", "sortProperty": "TransportationPartner", "additionalProperty": "TransportationPartner", "description": "TransportationPartner"}' />
					        </customData>
                            <Text text="Transportation Partner"></Text>
                        </Column>                        
						<Column>
                         <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "Status",  "leadingProperty": "Status", "sortProperty": "Status", "additionalProperty": "Status", "description": "Status"}' />
					        </customData>
							<Text text="Status"/>
						</Column>
						<Column>
                         <customData>
						        <core:CustomData key="p13nData"
										 value='\{"columnKey": "Exception",  "leadingProperty": "Exception", "sortProperty": "ExceptionLevel", "additionalProperty": "Exception", "description": "Exception"}' />
					        </customData>
							<Text text="Exceptions"/>
						</Column>
						<!-- <Column>
							<Text text="Actions"/>
						</Column> -->
					</columns>
					<items>
						<ColumnListItem type="Navigation" press=".onListItemPress">
							<cells>
								<ObjectIdentifier title="{SupplierName}" text="{Supplier}"/>
								<Text text="{SupplyLocation}"/>
								<ObjectIdentifier title="{ReceivingLocation}"/>
                                <ObjectIdentifier title="{VSRNumber}"></ObjectIdentifier>
                                <ObjectIdentifier title="{BuyerNumber}"></ObjectIdentifier>
                                <ObjectIdentifier title="{ArticleNumber}"></ObjectIdentifier>
								<ObjectNumber number="{ parts:[ {path:'OrdQty'}, {path: 'RetailUnits'} ], type: 'sap.ui.model.type.Unit', formatOptions: {showMeasure: false} }" unit="{RetailUnits}"/>
								<Text text="{path: 'OrderDate', type: 'sap.ui.model.type.Date', formatOptions: { source: {pattern: 'MM/dd/yyyy'}, style: 'medium', UTC: true } }"/>
								<Text text="{path: 'DeliveryDate', type: 'sap.ui.model.type.Date', formatOptions: { source: {pattern: 'MM/dd/yyyy'}, style: 'medium', UTC: true } }"/>
								<Text text="{path: 'ShipDate', type: 'sap.ui.model.type.Date', formatOptions: { source: {pattern: 'MM/dd/yyyy'}, style: 'medium', UTC: true } }"/>
	                            <ObjectIdentifier title="{TransportationPartner}"></ObjectIdentifier>
								<ObjectStatus text="{Status}" state="{path: 'Status' , formatter: '.formatter.statusText' }"/>
	 							<microChart:StackedBarMicroChart size="Responsive" press="press">
									<microChart:bars>
										<microChart:StackedBarMicroChartBar value="{path:'ExceptionLevel',formatter: '.formatter.calcValid'}" valueColor="green"/>
										<microChart:StackedBarMicroChartBar value="0" valueColor="orange"/>
										<microChart:StackedBarMicroChartBar value="{path:'ExceptionLevel',formatter: '.formatter.calcInvalid'}" valueColor="red"/>
									</microChart:bars>
								</microChart:StackedBarMicroChart>
								<!-- <Button text="Approve" enabled="{path:'status' , formatter: '.formatter.actionEnabled' }" press=".onApproveContractPress"></Button> -->
							</cells>
						</ColumnListItem>
					</items>
				</Table>
                </smartTable:SmartTable>
			</VBox>
		</f:content>
		<!-- DynamicPage Footer -->
		<f:footer>
			<OverflowToolbar>
				<ToolbarSpacer/>
				<Button type="Accept" text="Accept"/>
				<Button type="Reject" text="Reject"/>
			</OverflowToolbar>
		</f:footer>
	</f:DynamicPage>
</mvc:View>